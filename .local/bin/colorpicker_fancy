#!/bin/bash

TMPPCK=$(hyprpicker -a -n)
TMPPST=$(wl-paste)
CMD=$(echo "$TMPPST")
TMP=/tmp/Colorpicker$CMD.png

hyprpick() {
  $TMPPCK
}

check_dependencies() {
    ! command -v hyprpicker &>/dev/null &&
        notify-send Colorpicker "hyprpicker needs to be installed" && exit 1

    ! command -v magick &>/dev/null &&
        notify-send Colorpicker "imagemagick needs to be installed" && exit 1
}

main() {
    convert -size 120x120 xc:"$CMD" "$TMP"
    printf %s "$CMD" | wl-paste 

    notify-send -i "$TMP" Colorpicker "$CMD"
}

check_dependencies
hyprpick
main
